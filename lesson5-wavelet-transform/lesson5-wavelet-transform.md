# 前言
本章节我们将会讨论多分辨率展开与小波变换
# 多分辨率展开（Multiresolution Analysis，MRA）
## 基本原理
  多分辨率展开是小波分析的重要概念，它提供了一种将图像在不同分辨率下进行分析和表示的方法。
  
  基本思想是将一张图片分解为一系列嵌套的子空间，每个子空间对应不同的分辨率。在这个框架下，图像可以被看作是由一个低分辨率，保留粗糙特征的近似图像和一系列在不同分辨率下的细节图像叠加而成。
  
  这个过程就像是从一张高清晰度的照片逐渐丢失细节部分，最后变成一张模糊的小尺寸照片，每丢一张固定分辨率的图像，图像就丢失一定的细节。
## 数学描述
  设表示分辨率为$V_j$的近似子空间，这些子空间满足嵌套$……V_1 ∈V_2 ∈V_3……$关系。存在一个尺度函数$\varphi(t)$，使得$$\varphi_{j,k}(t)=2^{j/2}\varphi(2^jt - k)$$构成$V_j$的一组正交基（$j,z∈z$）。
  
  信号$f（t）$在$V_j$中的投影$A_jf(t)$可以表示为$A_jf(t)=\sum_{k\in Z}c_{j,k}\varphi_{j,k}(t)$，其中$c_{j,k}$是投影系数。
  
  这时候再定义细节子空间为$w_j$，使得有$V_{j + 1}=V_j\oplus W_j$，即下一个更高分辨率的近似子空间是由当前分辨率的近似子空间和细节子空间构成。存在小波函数$$psi(t)$，$\psi_{j,k}(t)=2^{j/2}\psi(2^jt - k)$$构成$W_j$的一组正交基，
  
  信号$W_j$在$W_j$中的投影$D_jf(t)$（即细节信号）可以表示为$$D_jf(t)=\sum_{k\in Z}c_{j,k}\varphi_{j,k}(t)$$
  其中$d_{j,k}$是细节系数。
## 应用
  基于上述原理，我们可以将一张图像拆成多张不同频率分量的图像，如何再根据需要处理其中的某些图片，处理完所需要的频率分量的图像后，再将拆出来未处理过的频率分量，与处理完的频率分量叠加起来，就能生成处理后的图片。
# 一维小波变换
## 小波变换的基本概念
### 定义与原理
  小波变换是一种信号处理技术，用于将信号分解为不同尺度和位置的成分。它通过一个小波函数进行伸缩和平移来分析信号。与傅里叶变换不同，傅里叶变换主要关注信号的频率成分，而小波变换能够同时提供信号在时间（或空间）和频率上的局部信息。例如，对于一张图像，小波变换不仅可以分析出该图像包含哪些频率成分，还能确定这些频率成分在什么时候出现。
### 小波函数的特点
  小波函数具有有限的持续时间和有限的带宽，这使得它在时间（或空间）和频率上都具有局部化的特性。常见的小波函数有 Haar 小波、Daubechies 小波等。以 Haar 小波为例，它是一个简单的矩形波，在一个小的区间内有值，区间外为零。
## 连续小波变换（CWT）
  **公式与计算：**对于一个连续信号$f(t)$，其连续小波变换定义为$$W_f(a,b)=\frac{1}{\sqrt{|a|}}\int_{-\infty}^{\infty}f(t)\overline{\psi(\frac{t - b}{a})}dt$$
  其中$a$是尺度参数（决定小波的伸缩），$b$是平移参数（决定小波的平移），$\psi(t)$是小波函数，$\overline{\psi(t)}$是其共轭函数。这个公式的含义是通过将小波函数在不同的尺度$a$和平移$b$下与信号$f(t)$进行积分运算，得到信号在不同尺度和平移下的小波系数$W_j(a,b)$。
  
  **尺度和平移的理解：**尺度参数$a$的变化会改变小波的频率特性。当$a$增大时，小波函数被拉伸，对应的频率变低，用于分析信号中的低频成分；当$a$减小，小波函数被压缩，频率变高，用于分析高频成分。平移参数则用于在时间（或空间）上移动小波函数，以覆盖整个信号。
## 离散小波变换（DWT）
  **原理与计算方法：**为了便于计算机实现，离散小波变换是更常用的形式。它是对连续小波变换的离散化。通常采用二进制离散化，即$a=2^j,b=k2^j$，（$j,k ∈Z$）。
  
  离散小波变换通过一系列滤波器组来实现。将信号通过一个低通滤波器$h(n)$得到近似系数（对应于低分辨率的近似信号），通过一个高通滤波器$g(n)$得到细节系数（对应于高频细节信号）。
  
  例如，对于一个长度为$N$的离散信号$x(n)$，可以通过滤波器组的卷积运算来计算近似系数$c_{j,k}$和细节系数$d_{j,k}$。
  
  **与多分辨率展开的联系：**离散小波变换与多分辨率展开密切相关。在每一层分解中，离散小波变换将信号分解为一个低分辨率的近似信号和一个高频细节信号，这正好对应于多分辨率展开中的近似子空间$V_j$和细节子空间$W_j$。通过不断地对近似信号进行下一层分解，可以得到信号的多分辨率表示。
## 快速小波变换
### 原理与算法实现
快速小波变换是一种高效的离散小波变换算法。它利用了滤波器组的卷积运算和下采样操作来快速计算小波系数。其核心思想是基于多分辨率分析中的滤波器组结构。在每一层分解中，通过将信号与低通滤波器$h(n)$和高通滤波器$g(n)$进行卷积，然后对卷积结果进行下采样（通常是每隔一个样本取一个），得到近似系数和细节系数。

例如，对于一个长度为$N$的信号，经过一层快速小波变换分解后，得到长度为$N/2$的近似系数和长度为的细节系数。

**注意：**这个过程可以递归地进行，对于下一层分解，只需要对近似系数进行同样的操作。这种分层的计算方式大大减少了计算量，使得小波变换在实际应用中更加高效。
### 计算复杂度与优势
快速小波变换的计算复杂度通常为$O(N)$（$N$为信号长度），相比于直接计算离散小波变换的复杂度（通常为$O(N^2)$）有了显著的降低。这使得它在处理大规模数据（如长序列信号或高分辨率图像）时能够快速地完成小波分解和重构。其优势在于能够高效地提取信号的多分辨率特征，并且在信号压缩、去噪等应用中可以快速地对信号进行处理。
# 二维小波变换
## 原理
二维小波变换主要用于图像处理。它是一维小波变换在二维空间（如图像的行和列）上的扩展。对于一个二维图像$f(x,y)$，可以先对图像的行进行一维小波变换，得到行方向上的近似系数和细节系数，然后对行像素产生的系数再进行，列方向上的一维小波变换。
## 图像分解与重构
在图像分解过程中，通过滤波器组在水平和垂直方向上的作用，将图像的能量集中到低频子带和少量的高频子带中。在重构图像时，利用小波系数和相应的重构滤波器，通过逆运算将分解后的子带重新组合成原始图像。这个过程类似于搭积木，先将图像拆分成不同的小块（子带），然后再按照规则将它们组合起来。
# 小波包
## 基本概念与定义
小波包是对小波变换的进一步扩展。在传统的小波变换中，只对信号的低频部分进行进一步分解，而小波包则是对信号的低频和高频部分都进行更细致的分解。它提供了一种更灵活的信号分解方式，可以根据信号的特性和应用需求来选择合适的分解路径。

例如，对于一个复杂的信号，可能不仅低频部分包含重要信息，高频部分经过进一步分解后也能发现有价值的细节。小波包允许我们将高频部分像低频部分一样不断地分解，从而得到一个更完整的信号分解树。
## 分解树与节点选择
小波包分解可以用一棵二叉树来表示，树的每个节点对应一个子空间和相应的小波包基函数。在分解过程中，可以根据一定的准则（如熵最小化准则）来选择哪些节点（即哪些子空间）包含更重要的信号信息。例如，对于一个包含多个频率成分的信号，通过计算每个节点的熵来判断信号能量的分布，选择熵较小的节点进行保留和进一步处理，而熵较大的节点可能包含较少的有用信息，可以进行适当的舍弃或简化处理。